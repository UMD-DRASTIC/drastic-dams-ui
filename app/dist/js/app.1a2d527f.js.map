{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?4a62","webpack:///./src/components/description.vue?ce9e","webpack:///./src/components/submissions.vue?52b4","webpack:///./src/ConfigProvider.js","webpack:///./src/components/CreateSubmission.vue?9c21","webpack:///src/components/CreateSubmission.vue","webpack:///./src/components/CreateSubmission.vue?a6b2","webpack:///./src/components/CreateSubmission.vue?8f10","webpack:///./src/App.vue?adb8","webpack:///src/App.vue","webpack:///./src/App.vue?60d0","webpack:///./src/App.vue?315a","webpack:///./src/components/dashboard.vue?d431","webpack:///src/components/dashboard.vue","webpack:///./src/components/dashboard.vue?04a2","webpack:///./src/components/dashboard.vue","webpack:///./src/components/description.vue?da90","webpack:///src/components/description.vue","webpack:///./src/components/description.vue?e0a8","webpack:///./src/components/description.vue?fa62","webpack:///./src/components/submissions.vue?1a12","webpack:///./src/assets/js/dtransfers.js","webpack:///./src/assets/js/treehelp.js","webpack:///./src/assets/js/filenames.js","webpack:///./src/assets/js/nps-sheets.js","webpack:///src/components/submissions.vue","webpack:///./src/components/submissions.vue?8845","webpack:///./src/components/submissions.vue?0dcb","webpack:///./src/main.js","webpack:///./src/components/CreateSubmission.vue?e31c"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","ConfigProvider","env","about","Version","Author","Created","Updated","this","process_env","CONFIG","baseURL","ldpURL","asWebSocketURL","startsWith","envName","substr","envValue","_vm","_h","$createElement","_c","_self","staticStyle","attrs","on","$event","showModal","setFocus","_v","staticClass","_t","containerName","directives","rawName","expression","ref","domProps","target","composing","_e","staticRenderFns","isLoading","isError","created","RDF","$rdf","Namespace","NPS","LDP","BC","methods","$nextTick","component","_m","components","treeOptions","scopedSlots","_u","fn","node","hasChildren","class","expanded","_s","text","rdfdetails","_l","index","activetab","makeViewData","tree_node","container","contents","uri","split","reverse","sort","x","a","toLowerCase","y","b","makePath","segments","focus","mounted","$refs","tree","$on","computed","icmsProps","filter","systemProps","crumbs","segs","pop","currentpath","propertyNames","children","minFetchDelay","fetchData","Promise","resolve","fetcher","load","then","onFetchError","console","error","stopPropagation","preventDefault","drop","icon","rdf","is","NRS","endsWith","md5Manifest","md5System","join","currentNode","SUBMISSION","getPath","nodeurl","docsExpected","pages","makePagedDocuments","ingest","PCDM_OBJECT","idx","RS","relatedObjectOf","action","type","progress","readAllDirectoryEntries","directoryReader","entries","readEntriesPromise","readEntries","reject","log","dtransfers","dataTransfer","getAllFileEntries","fileEntries","queue","items","webkitGetAsEntry","entry","isFile","isDirectory","createReader","flatten","arr","concat","Treehelp","depthFirstChildren","map","base","id","parent","isBatch","replace","findVue","path","chain","nextnode","$children","Filenames","filename","resource_names","sources","md5_sheet","dc_sheet","parts","match","getDescriptionPaths","String","lastIndexOf","basename","val","getItemPath","isSource","test","isMD5Sheet","isDCSheet","Sheet","fsfileentry","workbook","undefined","readFile","successCallback","errorCallback","file","f","reader","FileReader","onload","e","Uint8Array","XLSX","read","onerror","readAsArrayBuffer","getTextPreview","worksheet","Sheets","SheetNames","utils","sheet_to_txt","loadWorkbook","wb","harvestDC","descriptions_base","json","sheet_to_json","lookup","forEach","dc_mapping","item","dc_record","trim","filenames","prop","identifier","title","creator","subject","description","date","rights","alphaSort","determineDragAndDropCapable","differenceKeyset","o1","o2","Queue","enqueue","dequeue","isEmpty","peek","props","required","submissionsPath","default","R","PCDM","IANA","ORE","DCE","PREMIS","MD5","rdfStore","rdfFetcher","baseContainer","sym","updateTimer","updateQueue","activityStreamWebSocket","WebSocket","onmessage","urlstr","activityMessage","substring","indexOf","onopen","event","dragAndDropCapable","me","model","calculateNodeData","parentNode","timer","setTimeout","processQueue","isimage","re_img","hasRelatedObjectOf","rdfProps","pcdmPageImages","images","each","matches","fixitySeverity","fixityExists","manifestFixityExists","rdfnode","getManifestMD5","any","fs","graph","getSystemMD5","toString","unload","loadList","loadLoc","subscribe","submissionContent","Set","docsActual","paths","add","docPath","size","next","updateNode","ltnode","relPath","neuw","oldChildMap","remove","loadChildList","addChild","enqueueIngests","fullPath","localeCompare","files","uploadFile","ldpActions","encodeURIComponent","createFolder","uploadAdded","harvestDCSheet","expand","append","newNode","currentSubmission","descdetails","ldpActionFields","require","config","Configuration","process","routes","Dashboard","Description","Submissions","router","VueRouter","Vue","use","VueAxios","axios","VueFeather","CreateSubmission","render","h","App","$mount"],"mappings":"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","file":"js/app.1a2d527f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./description.vue?vue&type=style&index=0&id=1dc7dfd7&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./submissions.vue?vue&type=style&index=0&id=bbbb3a58&scoped=true&lang=css&\"","function ConfigProvider(env) {\n  var about = {\n     Version: 0.1,\n     Author: \"Greg Jansen\",\n     Created: \"Fall 2020\",\n     Updated: \"Fall 2020\"\n  };\n  if (window === this) {\n    return new ConfigProvider(env);\n  }\n  this.process_env = env\n  this.CONFIG = {\n    baseURL: '$VUE_APP_BASE_URL',\n    ldpURL: '$VUE_APP_LDP_URL',\n    asWebSocketURL: '$VUE_APP_AS_WEBSOCKET_URL',\n  };\n  if(this.CONFIG) {\n    return this;\n  } else {\n    return about;\n  }\n}\n\nConfigProvider.prototype = {\n  value: function(name) {\n    if (!(name in this.CONFIG)) {\n      return;\n    }\n\n    const value = this.CONFIG[name];\n\n    if (!value) {\n      return;\n    }\n\n    if (value.startsWith('$VUE_APP_')) {\n      const envName = value.substr(1);\n      const envValue = this.process_env[envName];\n      if (envValue) {\n        return envValue;\n      } else {\n        return\n      }\n    } else {\n      return value;\n    }\n  }\n}\n\nexport { ConfigProvider as default };\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"inline\"}},[_c('button',{attrs:{\"id\":\"show-modal\"},on:{\"click\":function($event){_vm.showModal = true; _vm.setFocus();}}},[_vm._v(\"Create Submission\")]),(_vm.showModal)?_c('transition',{attrs:{\"name\":\"modal\"},on:{\"close\":function($event){_vm.showModal = false}}},[_c('div',{staticClass:\"modal-mask\"},[_c('div',{staticClass:\"modal-wrapper\"},[_c('div',{staticClass:\"modal-container\"},[_c('div',{staticClass:\"modal-header\"},[_vm._t(\"header\",function(){return [_vm._v(\" Create Submission \")]})],2),_c('div',{staticClass:\"modal-body\"},[(_vm.isError)?_c('div',[_vm._v(\"error\")]):(_vm.isLoading)?_c('div',[_vm._v(\"loading\")]):_c('div',[_c('form',{on:{\"submit\":function($event){_vm.create(_vm.containerName); _vm.showModal = false;}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.containerName),expression:\"containerName\"}],ref:\"name\",attrs:{\"placeholder\":'enter submission name..'},domProps:{\"value\":(_vm.containerName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.containerName=$event.target.value}}})])])]),_c('div',{staticClass:\"modal-footer\"},[_vm._t(\"footer\",function(){return [_c('button',{staticClass:\"modal-default-button\",on:{\"click\":function($event){_vm.showModal = false}}},[_vm._v(\" CANCEL \")]),_c('button',{staticClass:\"modal-default-button\",on:{\"click\":function($event){_vm.create(_vm.containerName); _vm.showModal = false;}}},[_vm._v(\" OK \")])]})],2)])])])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div style='display: inline'>\n  <button id=\"show-modal\" @click=\"showModal = true; setFocus();\">Create Submission</button>\n  <transition name=\"modal\" v-if=\"showModal\" @close=\"showModal = false\">\n    <div class=\"modal-mask\">\n      <div class=\"modal-wrapper\">\n        <div class=\"modal-container\">\n\n          <div class=\"modal-header\">\n            <slot name=\"header\">\n              Create Submission\n            </slot>\n          </div>\n\n          <div class=\"modal-body\">\n            <div v-if=\"isError\">error</div>\n            <div v-else-if=\"isLoading\">loading</div>\n            <div v-else>\n              <form v-on:submit=\"create(containerName); showModal = false;\">\n                <input ref=\"name\" v-model=\"containerName\" :placeholder=\"'enter submission name..'\">\n              </form>\n            </div>\n          </div>\n\n          <div class=\"modal-footer\">\n            <slot name=\"footer\">\n              <button class=\"modal-default-button\" @click=\"showModal = false\">\n                CANCEL\n              </button>\n              <button class=\"modal-default-button\" @click=\"create(containerName); showModal = false;\">\n                OK\n              </button>\n            </slot>\n          </div>\n        </div>\n      </div>\n    </div>\n  </transition>\n  </div>\n</template>\n\n<script>\n/* eslint-disable no-console */\n/* eslint-disable no-alert */\nconst $rdf = require('rdflib');\n\nexport default {\n  name: 'CreateSubmission',\n  data: function() {\n    return {\n      showModal: false,\n      containerName: '',\n      isLoading: false,\n      isError: false\n    }\n  },\n  created() {\n    this.RDF = $rdf.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#');\n    this.NPS = $rdf.Namespace('https://example.nps.gov/2021/nps-workflow#');\n    this.LDP = $rdf.Namespace('http://www.w3.org/ns/ldp#');\n    this.BC = this.LDP('BasicContainer');\n  },\n  methods: {\n    setFocus() {\n      this.$nextTick(() => this.$refs.name.focus());\n    },\n    async create (name) {\n      try {\n        this.isLoading = true;\n        let head = {\n          'Content-Type': 'text/turtle',\n          'Link': `<${ this.BC.value }>; rel=\"type\"`,\n          'Slug': name\n        };\n        let myurl = 'http://localhost:9090/submissions/';\n        await this.$http.post(myurl,\n          `<> a <${this.NPS('submission').value}> .`,\n          { headers: head }\n        );\n      } catch(err) {\n        console.log(err);\n        this.isError = true;\n      } finally {\n        this.isLoading = false;\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.modal-mask {\n  position: fixed;\n  z-index: 9998;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: table;\n  transition: opacity 0.3s ease;\n}\n\n.modal-wrapper {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.modal-container {\n  width: 80vmin;\n  margin: 0px auto;\n  padding: 20px 30px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.33);\n  transition: all 0.3s ease;\n  font-family: Helvetica, Arial, sans-serif;\n}\n\n.modal-header h3 {\n  margin-top: 0;\n  color: #42b983;\n}\n\n.modal-body {\n  margin: 20px 0;\n}\n\n.modal-default-button {\n  float: right;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateSubmission.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateSubmission.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateSubmission.vue?vue&type=template&id=60cc03a2&scoped=true&\"\nimport script from \"./CreateSubmission.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateSubmission.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CreateSubmission.vue?vue&type=style&index=0&id=60cc03a2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60cc03a2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid\",attrs:{\"id\":\"app\"}},[_c('nav',{staticClass:\"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\"},[_c('router-link',{staticClass:\"navbar-brand col-sm-1 col-md-1 mr-0\",attrs:{\"to\":\"/dashboard\"}},[_c('feather',{attrs:{\"size\":\"1.1em\",\"type\":\"home\"}}),_vm._v(\" Home \")],1),_vm._m(0),_c('ul',{staticClass:\"nav nav-pills nav-fill col-md-9 px-3\"},[_c('li',{staticClass:\"nav-item text-nowrap\"}),_c('li',{staticClass:\"nav-item text-nowrap\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/description\"}},[_c('feather',{attrs:{\"size\":\"1.1em\",\"type\":\"archive\"}}),_vm._v(\" Archival Desription \"),_c('span',{staticClass:\"sr-only\"},[_vm._v(\"(current)\")])],1)],1),_c('li',{staticClass:\"nav-item text-nowrap\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/submissions\"}},[_c('feather',{attrs:{\"size\":\"1.1em\",\"type\":\"inbox\"}}),_vm._v(\" Submissions \")],1)],1),_c('li',{staticClass:\"nav-item text-nowrap\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/destructions\"}},[_c('feather',{attrs:{\"size\":\"1.1em\",\"type\":\"trash-2\"}}),_vm._v(\" Destructions \")],1)],1),_c('li',{staticClass:\"nav-item text-nowrap\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/reports\"}},[_c('feather',{attrs:{\"size\":\"1.1em\",\"type\":\"pie-chart\"}}),_vm._v(\" Reports \")],1)],1),_c('li',{staticClass:\"nav-item text-nowrap\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/saved\"}},[_c('feather',{attrs:{\"size\":\"1.1em\",\"type\":\"star\"}}),_vm._v(\" Bookmarks \")],1)],1),_vm._m(1)])],1),_c('div',{staticClass:\"container-fluid h-100\"},[_c('div',{staticClass:\"row h-100\"},[_c('main',{staticClass:\"col-md-12 ml-sm-auto col-lg-12 px-4\",attrs:{\"role\":\"main\"}},[_c('div',{staticClass:\"h-100 d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\"},[_c('router-view')],1)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-md-2\"},[_c('input',{staticClass:\"form-control form-control-dark\",attrs:{\"type\":\"text\",\"placeholder\":\"Search\",\"aria-label\":\"Search\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"nav-item text-nowrap\"},[_c('a',{staticClass:\"nav-link\",attrs:{\"href\":\"#\"}},[_vm._v(\"Sign out\")])])}]\n\nexport { render, staticRenderFns }","<template>\n<div id=\"app\" class=\"container-fluid\">\n  <nav class=\"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\">\n    <router-link class=\"navbar-brand col-sm-1 col-md-1 mr-0\" to=\"/dashboard\">\n      <feather size=\"1.1em\" type=\"home\"></feather> Home\n    </router-link>\n    <div class=\"col-md-2\">\n      <input class=\"form-control form-control-dark\" type=\"text\" placeholder=\"Search\" aria-label=\"Search\">\n    </div>\n    <ul class=\"nav nav-pills nav-fill col-md-9 px-3\">\n      <li class=\"nav-item text-nowrap\">\n\n      </li>\n      <li class=\"nav-item text-nowrap\">\n        <router-link class=\"nav-link\" to=\"/description\">\n          <feather size=\"1.1em\" type=\"archive\"></feather>\n          Archival Desription <span class=\"sr-only\">(current)</span>\n        </router-link>\n      </li>\n      <li class=\"nav-item text-nowrap\">\n        <router-link class=\"nav-link\" to=\"/submissions\">\n          <feather size=\"1.1em\" type=\"inbox\"></feather>\n          Submissions\n        </router-link>\n      </li>\n      <li class=\"nav-item text-nowrap\">\n        <router-link class=\"nav-link\" to=\"/destructions\">\n          <feather size=\"1.1em\" type=\"trash-2\"></feather>\n          Destructions\n        </router-link>\n      </li>\n      <li class=\"nav-item text-nowrap\">\n        <router-link class=\"nav-link\" to=\"/reports\">\n          <feather size=\"1.1em\" type=\"pie-chart\"></feather>\n          Reports\n        </router-link>\n      </li>\n      <li class=\"nav-item text-nowrap\">\n        <router-link class=\"nav-link\" to=\"/saved\">\n          <feather size=\"1.1em\" type=\"star\"></feather>\n          Bookmarks\n        </router-link>\n      </li>\n      <li class=\"nav-item text-nowrap\">\n        <a class=\"nav-link\" href=\"#\">Sign out</a>\n      </li>\n    </ul>\n  </nav>\n\n  <div class=\"container-fluid h-100\">\n    <div class=\"row h-100\">\n      <main role=\"main\" class=\"col-md-12 ml-sm-auto col-lg-12 px-4\">\n        <div class=\"h-100 d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\n          <router-view />\n        </div>\n      </main>\n    </div>\n  </div>\n\n</div>\n</template>\n\n<script>\nimport VueFeather from 'vue-feather';\n\nexport default {\n  name: 'app',\n  components: {\n    'feather': VueFeather\n  }\n}\n</script>\n\n<style>\nhtml, body, #main {\n  height: 100%;\n}\n\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  //text-align: center;\n  color: #2c3e50;\n  padding: 0px;\n  padding-top: 40px;\n  height: 100%;\n}\ndiv.folderview {\n  width: auto;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  text-align: center;\n  padding: 0px;\n  margin: 0px;\n}\n\n.nav a {\n  color: #cccccc;\n}\n\na.router-link-active {\n  color: #bbbbff;\n  font-weight: bolder;\n}\n\n/* Style the tabs */\n.tabs {\n    overflow: hidden;\n  margin-left: 20px;\n    margin-bottom: -2px;\n}\n\n.tabs ul {\n    list-style-type: none;\n    margin-left: 20px;\n}\n\n.tabs a{\n    float: left;\n    cursor: pointer;\n    padding: 12px 24px;\n    transition: background-color 0.2s;\n    border: 1px solid #ccc;\n    border-right: none;\n    background-color: #f1f1f1;\n    border-radius: 10px 10px 0 0;\n    font-weight: bold;\n}\n.tabs a:last-child {\n    border-right: 1px solid #ccc;\n}\n\n/* Change background color of tabs on hover */\n.tabs a:hover {\n    background-color: #aaa;\n    color: #fff;\n}\n\n/* Styling for active tab */\n.tabs a.active {\n    background-color: #fff;\n    color: #484848;\n    border-bottom: 2px solid #fff;\n    cursor: default;\n}\n\n/* Style the tab content */\n.tabcontent {\n    padding: 30px;\n    border: 1px solid #ccc;\n    border-radius: 10px;\n  box-shadow: 3px 3px 6px #e1e1e1\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=1cc6691e&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dashboard\"},[_c('h2',{staticClass:\"h2\"},[_vm._v(\"Dashboard\")]),_c('div',{staticClass:\"btn-toolbar mb-2 mb-md-0\"},[_c('div',{staticClass:\"btn-group mr-2\"},[_c('button',{staticClass:\"btn btn-sm btn-outline-secondary\",attrs:{\"type\":\"button\"}},[_vm._v(\"Share\")]),_c('button',{staticClass:\"btn btn-sm btn-outline-secondary\",attrs:{\"type\":\"button\"}},[_vm._v(\"Export\")])]),_c('button',{staticClass:\"btn btn-sm btn-outline-secondary dropdown-toggle\",attrs:{\"type\":\"button\"}},[_c('span',{attrs:{\"data-feather\":\"calendar\"}}),_vm._v(\" This week \")])])])}]\n\nexport { render, staticRenderFns }","<template>\n <div class=\"dashboard\">\n   <h2 class=\"h2\">Dashboard</h2>\n   <div class=\"btn-toolbar mb-2 mb-md-0\">\n     <div class=\"btn-group mr-2\">\n       <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\">Share</button>\n       <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\">Export</button>\n     </div>\n     <button type=\"button\" class=\"btn btn-sm btn-outline-secondary dropdown-toggle\">\n       <span data-feather=\"calendar\"></span>\n       This week\n     </button>\n   </div>\n </div>\n</template>\n<script>\n\nexport default {\n name: \"Dashboard\"\n};\n\n</script>\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dashboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dashboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dashboard.vue?vue&type=template&id=a4cf5296&scoped=true&\"\nimport script from \"./dashboard.vue?vue&type=script&lang=js&\"\nexport * from \"./dashboard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a4cf5296\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid\"},[_vm._m(0),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"scroll col-md-4\"},[_c('tree',{ref:\"tree\",attrs:{\"df:data\":\"fetchData\",\"options\":_vm.treeOptions,\"df:filter\":\"filter\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nreturn _c('span',{staticClass:\"tree-text\"},[(!node.hasChildren())?[_c('i',{staticClass:\"ion-android-star\"}),_vm._v(\" \"+_vm._s(node.text)+\" \")]:[_c('i',{class:[node.expanded() ? 'ion-android-folder-open' : 'ion-android-folder']}),_vm._v(\" \"+_vm._s(node.text)+\" \")]],2)}}])},[_c('Uploader')],1)],1),(_vm.rdfdetails && _vm.rdfdetails.length > 0)?_c('div',{staticClass:\"col-md-8\",attrs:{\"id\":\"tabs\"}},[_c('div',{staticClass:\"container\"},_vm._l((_vm.crumbs),function(c,index){return _c('span',{key:index,staticClass:\"crumb\"},[_vm._v(\" \"+_vm._s(c)+\"  \")])}),0),_c('div',{staticClass:\"tabs\"},[_c('a',{class:[ _vm.activetab === 1 ? 'active' : '' ],on:{\"click\":function($event){_vm.activetab=1}}},[_vm._v(\"Description\")]),_c('a',{class:[ _vm.activetab === 3 ? 'active' : '' ],on:{\"click\":function($event){_vm.activetab=3}}},[_vm._v(\"System\")])]),_c('div',{staticClass:\"content\"},[(_vm.activetab === 1)?_c('div',{staticClass:\"tabcontent\"},_vm._l((_vm.icmsProps),function(s){return _c('div',{key:s[0]+s[1],staticClass:\"row\"},[_c('div',{staticClass:\"label col-md-4\"},[_vm._v(_vm._s(s[0]))]),_c('div',{staticClass:\"col-md-8\"},[_vm._v(_vm._s(s[1]))])])}),0):_vm._e(),(_vm.activetab === 3)?_c('div',{staticClass:\"tabcontent\"},_vm._l((_vm.systemProps),function(s){return _c('div',{key:s[0]+s[1],staticClass:\"row\"},[_c('div',{staticClass:\"label col-md-6\"},[_vm._v(_vm._s(s[0]))]),_c('div',{staticClass:\"label col-md-6\"},[_vm._v(_vm._s(s[1]))])])}),0):_vm._e()])]):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('h2',[_vm._v(\"Archival Description\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container-fluid\">\n    <div class=\"row\">\n    <h2>Archival Description</h2>\n  </div>\n  <div class=\"row\">\n    <div class=\"scroll col-md-4\">\n      <tree df:data=\"fetchData\" :options=\"treeOptions\" df:filter=\"filter\" ref=\"tree\">\n        <span class=\"tree-text\" slot-scope=\"{ node }\">\n          <template v-if=\"!node.hasChildren()\">\n            <i class=\"ion-android-star\"></i>\n            {{ node.text }}\n          </template>\n          <template v-else>\n            <i :class=\"[node.expanded() ? 'ion-android-folder-open' : 'ion-android-folder']\"></i> {{ node.text }}\n          </template>\n        </span>\n        <Uploader />\n      </tree>\n    </div>\n    <div id=\"tabs\" class=\"col-md-8\" v-if=\"rdfdetails && rdfdetails.length > 0\">\n      <div class=\"container\">\n         <span v-for=\"(c, index) in crumbs\" :key=\"index\" class=\"crumb\">\n         {{ c }} \n         </span>\n      </div>\n      <div class=\"tabs\">\n          <a v-on:click=\"activetab=1\" v-bind:class=\"[ activetab === 1 ? 'active' : '' ]\">Description</a>\n          <a v-on:click=\"activetab=3\" v-bind:class=\"[ activetab === 3 ? 'active' : '' ]\">System</a>\n      </div>\n\n      <div class=\"content\">\n          <div v-if=\"activetab === 1\" class=\"tabcontent\">\n            <div v-for=\"s in icmsProps\" :key=\"s[0]+s[1]\" class=\"row\">\n              <div class=\"label col-md-4\">{{ s[0] }}</div>\n              <div class=\"col-md-8\">{{ s[1] }}</div>\n            </div>\n          </div>\n          <div v-if=\"activetab === 3\" class=\"tabcontent\">\n            <div v-for=\"s in systemProps\" :key=\"s[0]+s[1]\" class=\"row\">\n              <div class=\"label col-md-6\">{{ s[0] }}</div>\n              <div class=\"label col-md-6\">{{ s[1] }}</div>\n            </div>\n          </div>\n      </div>\n\n    </div>\n\n  </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable no-console */\n/* eslint-disable no-alert */\n/* eslint-disable no-unused-vars */\nimport LiquorTree from 'liquor-tree'\nconst $rdf = require('rdflib');\nconst store = $rdf.graph();\nconst fetcher = new $rdf.Fetcher(store);\nconst LDP = $rdf.Namespace('http://www.w3.org/ns/ldp#');\nconst ldp_baseurl = 'http://localhost:9090';\nconst path = '/description/';\nconst base_container = store.sym(ldp_baseurl);\nconst re_icms = /<https:\\/\\/rediscoverysoftware\\.com\\/schema\\/icms_ns\\/(.*)>/\n\nfunction makeViewData(tree_node, container) {\n  let contents = store.each(container, LDP('contains'));\n  let result = [];\n  for (var i=0; i<contents.length; i++) {\n    let n = {id:null};\n    if(contents[i].uri.endsWith(\"/\")) {\n      n['text'] = contents[i].uri.split('/').reverse()[1];\n      n['isBatch'] = true;\n    } else {\n      n['text'] = contents[i].uri.split('/').reverse()[0];\n    }\n    result.push(n);\n  }\n  result.sort(function(a, b) {\n    var x = a.text.toLowerCase();\n    var y = b.text.toLowerCase();\n    if (x < y) {return -1;}\n    if (x > y) {return 1;}\n    return 0;\n  });\n  return result;\n}\n\nfunction makePath(tree_node) {\n  if(tree_node.id == 'root') {  // get base node\n    if(path == '/') {\n      return \"\";\n    } else {\n      return path;\n    }\n  }\n  var segments = [];\n  for(var n = tree_node; n != null; n = n.parent) {\n    segments.push(n.data.text);\n  }\n  let result = path + segments.reverse().join('/');\n  if(tree_node.isBatch) { result += \"/\"; }\n  return result;\n}\n\nexport default {\n  name: 'Description',\n  components: {\n    'tree': LiquorTree\n  },\n  methods: {\n    focus: async function(oldNode, newNode) {\n      let node = newNode && newNode.text ? newNode : oldNode\n      let container = store.sym(base_container.uri + makePath(node));\n      fetcher.load(container).then(() => {\n        this.rdfdetails = store.statementsMatching(container, undefined, undefined);\n        this.currentpath = makePath(node);\n      }).catch(e => console.log(e));\n    },\n  },\n  mounted() {\n    this.$refs.tree.$on(\"node:selected\", this.focus);\n  },\n  computed: {\n    icmsProps: function () {\n      return this.rdfdetails.filter(s => re_icms.test(s.predicate)).map(\n        v => {\n          let result = [];\n          result[0] = String(v.predicate).match(re_icms)[1];\n          result[1] = v.object;\n          return result;\n        }\n      ).filter(foo => foo[0] != \"RediscoveryExport\");\n    },\n    systemProps: function () {\n      return this.rdfdetails.filter(s => !re_icms.test(s.predicate)).map(\n        v => {\n          let result = [];\n          result[0] = v.predicate;\n          result[1] = v.object;\n          return result;\n        }\n      );\n    },\n    crumbs: function() {\n      let segs = this.currentpath.split('/');\n      segs.pop();\n      segs.shift();\n      segs.shift();\n      return segs;\n    }\n  },\n  data: function() {\n    return {\n      rdfdetails: [],\n      activetab: 1,\n      currentpath: \"/\",\n      treeOptions: {\n        propertyNames: {\n          //text: 'text',\n          children: 'contents'\n        },\n        minFetchDelay: 1000,\n        fetchData: node => {\n          return new Promise(function (resolve) {\n            let container = store.sym(base_container.uri + makePath(node));\n            fetcher.load(container).then(() => {\n              let result = makeViewData(node, container);\n              resolve(result);\n            }).catch(e => console.log(e));\n          });\n        },\n        onFetchError(error) {\n          console.error(error)\n        }\n      }\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\ndiv.scroll {\n  width: 50%;\n}\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  /* color: #42b983;*/\n}\n\nspan.crumb {\n  font-weight: bolder;\n  font-size: larger;\n}\n\ndiv.label {\n  overflow-wrap: break-word;\n}\n\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./description.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./description.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./description.vue?vue&type=template&id=1dc7dfd7&scoped=true&\"\nimport script from \"./description.vue?vue&type=script&lang=js&\"\nexport * from \"./description.vue?vue&type=script&lang=js&\"\nimport style0 from \"./description.vue?vue&type=style&index=0&id=1dc7dfd7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1dc7dfd7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid d-flex flex-column h-100\"},[_c('div',{staticClass:\"row\"},[_c('h2',[_vm._v(\"Submissions\")]),_c('div',{staticStyle:{\"padding-left\":\"5em\"}},[_vm._v(\"\"),_c('CreateSubmission')],1)]),_c('div',{staticClass:\"row h-70\"},[_c('div',{staticClass:\"col-md-6 overflow-auto\",staticStyle:{\"overflow-y\":\"scroll\",\"height\":\"700px\"}},[_c('tree',{ref:\"tree\",attrs:{\"df:data\":\"fetchData\",\"dafdv-slot:default\":\"slotProps\",\"options\":_vm.treeOptions,\"df:filter\":\"filter\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nreturn _c('span',{staticClass:\"tree-text\"},[_c('div',{staticStyle:{\"display\":\"inline\"},attrs:{\"id\":\"file-drag-drop\"}},[_c('form',{on:{\"drag\":function($event){$event.stopPropagation();$event.preventDefault();},\"dragstart\":function($event){$event.stopPropagation();$event.preventDefault();},\"dragend\":function($event){$event.stopPropagation();$event.preventDefault();},\"dragover\":function($event){$event.stopPropagation();$event.preventDefault();},\"dragenter\":function($event){$event.stopPropagation();$event.preventDefault();},\"dragleave\":function($event){$event.stopPropagation();$event.preventDefault();},\"drop\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.drop($event, node)}}},[[_c('feather',{attrs:{\"type\":_vm.icon(node.data.rdf)}}),_vm._v(\"  \"+_vm._s(node.data.text)+\"  \"),(_vm.is(node.data.rdf, _vm.NRS) && node.data.rdf.value.endsWith('.tif'))?[_c('span',{staticStyle:{\"font-family\":\"'Courier New', monospace\"}},[(node.data.md5Manifest == null)?_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"[\")]):_c('span',[_vm._v(\"[\")]),(node.data.md5Manifest == null || node.data.md5System == null || node.data.md5System != node.data.md5Manifest)?_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"\")]):_c('span',[_vm._v(\"=\")]),(node.data.md5System == null)?_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"]\")]):_c('span',[_vm._v(\"]\")])])]:_vm._e()]],2)])])}}])})],1),(_vm.currentNode)?_c('div',{staticClass:\"col-md-6\"},[_c('div',{staticClass:\"container\"},_vm._l((_vm.crumbs),function(c,index){return _c('span',{key:_vm.crumbs.slice(0,index).join('/'),staticClass:\"crumb\"},[_vm._v(\" \"+_vm._s(c)+\" \"),_c('feather',{attrs:{\"type\":\"chevrons-right\"}})],1)}),0),_c('div',{staticClass:\"container\"},[_c('h2',[(_vm.is(_vm.currentNode.data.rdf, _vm.SUBMISSION))?[_vm._v(\"Submission: \")]:_vm._e(),_vm._v(_vm._s(_vm.currentNode['text']))],2)]),_c('div',{staticClass:\"tabs\"},[_c('a',{class:[ _vm.activetab === 1 ? 'active' : '' ],on:{\"click\":function($event){_vm.activetab=1}}},[_vm._v(\"View\")]),_c('a',{class:[ _vm.activetab === 2 ? 'active' : '' ],on:{\"click\":function($event){_vm.activetab=2}}},[_vm._v(\"Description\")]),_c('a',{class:[ _vm.activetab === 3 ? 'active' : '' ],on:{\"click\":function($event){_vm.activetab=3}}},[_vm._v(\"Provenance\")]),_c('a',{class:[ _vm.activetab === 4 ? 'active' : '' ],on:{\"click\":function($event){_vm.activetab=4}}},[_vm._v(\"Technical Data\")])]),_c('div',{staticClass:\"content\"},[(_vm.activetab === 1)?_c('div',{staticClass:\"tabcontent\"},[(_vm.isimage)?_c('img',{key:_vm.getPath(_vm.currentNode),staticClass:\"img-fluid\",staticStyle:{\"padding-top\":\"5px\",\"max-height\":\"500px\"},attrs:{\"src\":_vm.nodeurl}}):_vm._e(),(_vm.is(_vm.currentNode.data.rdf, _vm.SUBMISSION))?[_vm._m(0),_c('ol',[_c('li',[_vm._v(\"Drag and drop scanned page files onto the submission package icon or below\"),_c('br'),_c('div',{attrs:{\"id\":\"dropPad\"},on:{\"drag\":function($event){$event.stopPropagation();$event.preventDefault();},\"dragstart\":function($event){$event.stopPropagation();$event.preventDefault();},\"dragend\":function($event){$event.stopPropagation();$event.preventDefault();},\"dragover\":function($event){$event.stopPropagation();$event.preventDefault();},\"dragenter\":function($event){$event.stopPropagation();$event.preventDefault();},\"dragleave\":function($event){$event.stopPropagation();$event.preventDefault();},\"drop\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.drop($event, _vm.currentNode)}}},[_c('input',{staticClass:\"box__file\",attrs:{\"type\":\"file\",\"name\":\"files[]\",\"id\":\"file\",\"data-multiple-caption\":\"{count} files selected\",\"multiple\":\"\"}}),_vm._m(1)])]),_c('li',[_vm._v(\"Upload an MD5 manifest (Excel file: ???_MD5.xslx).\")]),_c('li',[_vm._v(\"Wait for fixity calculations to complete..\")]),_c('li',[_vm._v(\"Review fixity status of uploaded files. (Red indicates an issue.)\")]),_c('li',[_vm._v(\"Upload a Dublin Core metadata (Excel file: ???_inventory.xslx).\")]),_c('li',[_vm._v(\"Do you expect to create \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(_vm.currentNode.data.docsExpected))]),_vm._v(\" documents with \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(_vm.currentNode.data.pages))]),_vm._v(\" pages in total?\")]),_c('li',[_vm._v(\"If so, click on \"),_c('button',{on:{\"click\":function($event){return _vm.makePagedDocuments(_vm.currentNode.data.rdf.uri)}}},[_vm._v(\"Make Documents\")]),_vm._v(\" to create document structures.\")]),_c('li',[_vm._v(\"Review document structures\")]),_c('li',[_vm._v(\"All documents should be linked to a folder in the archival description.\")]),_c('li',[_vm._v(\"If this submission package is complete, click on \"),_c('button',{on:{\"click\":function($event){return _vm.ingest()}}},[_vm._v(\"Ingest\")]),_vm._v(\" to make it official.\")])])]:(_vm.is(_vm.currentNode.data.rdf, _vm.PCDM_OBJECT))?[_c('div',[_vm._l((_vm.pcdmPageImages),function(s,idx){return [_c('img',{key:idx,attrs:{\"height\":\"50\",\"src\":s}})]})],2),_c('p',[_c('strong',[_c('a',{attrs:{\"href\":this.currentNode.data.rdf.uri}},[_vm._v(\"Raw content link (text/turtle)\")])])])]:(_vm.is(_vm.currentNode.data.rdf, _vm.NRS))?[_c('p',[_c('strong',[_c('a',{attrs:{\"target\":\"_blank\",\"href\":this.currentNode.data.rdf.uri}},[_vm._v(\"Raw file link\")])])])]:(_vm.is(_vm.currentNode.data.rdf, _vm.RS))?[_c('p',[_c('strong',[_c('a',{attrs:{\"href\":this.currentNode.data.rdf.uri}},[_vm._v(\"Raw content link (text/turtle)\")])])])]:_vm._e()],2):_vm._e(),(_vm.activetab === 2)?_c('div',{staticClass:\"tabcontent\"},[(_vm.hasRelatedObjectOf)?_c('a',{attrs:{\"href\":_vm.relatedObjectOf}},[_vm._v(\"Finding aid location: \"+_vm._s(_vm.relatedObjectOf))]):_vm._e(),_vm._l((_vm.rdfProps),function(s){return [(s[0].startsWith('<http://purl.org/dc/elements/1.1/'))?_c('div',{key:s[0]+s[1],staticClass:\"row\"},[_c('div',{staticClass:\"col-md-3\"},[_vm._v(_vm._s(s[0]))]),_c('div',{staticClass:\"col-md-9\"},[_vm._v(_vm._s(s[1]))])]):_vm._e()]}),_c('p',[_vm._v(\"TODO render item level Dublin Core (to be extracted from manifest)\")])],2):_vm._e(),(_vm.activetab === 3)?_c('div',{staticClass:\"tabcontent\"},[_vm._v(\" List of PREMIS events. \")]):_vm._e(),(_vm.activetab === 4)?_c('div',{staticClass:\"tabcontent\"},[_c('div',{staticClass:\"container\"},[_c('p',[_vm._v(\"TODO: use prefixes w/hover showing expanded URIs.\")]),_vm._l((_vm.rdfProps),function(s,index){return _c('div',{key:index,staticClass:\"row\",attrs:{\"dfkey\":\"s[0]+s[1]\"}},[_c('div',{staticClass:\"col-md-3\"},[_vm._v(_vm._s(s[0]))]),_c('div',{staticClass:\"col-md-9\"},[_vm._v(_vm._s(s[1]))])])})],2)]):_vm._e()])]):_vm._e()]),_c('hr'),_c('div',{staticClass:\"row mt-auto h-100 col-md-12 mb-3\"},[_c('div',{staticClass:\"scroll col-md-12\"},[_c('h4',[_vm._v(\"Actions\")]),_c('table',{staticClass:\"table table-hover\"},[_vm._m(2),_c('tbody',_vm._l((_vm.ldpActions),function(action,index){return _c('tr',{key:index},[_c('td',[_vm._v(_vm._s(index))]),_c('td',[_vm._v(_vm._s(action.type))]),_c('td',[_vm._v(_vm._s(action.uri))]),_c('td',[_c('progress',{attrs:{\"max\":\"100\"},domProps:{\"value\":action.progress}},[_vm._v(_vm._s(action.progress))])])])}),0)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"Submission Package Status: \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(\"Preparing\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"file\"}},[_c('strong',[_vm._v(\"Choose files\")]),_c('span',{staticClass:\"box__dragndrop\"},[_vm._v(\" or drag them here\")]),_vm._v(\".\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{attrs:{\"tabindex\":\"0\",\"data-field\":\"id\"}},[_c('div',{staticClass:\"th-inner both\"},[_vm._v(\"#\")]),_c('div',{staticClass:\"fht-cell\"})]),_c('th',{attrs:{\"tabindex\":\"0\",\"data-field\":\"name\"}},[_c('div',{staticClass:\"th-inner both\"},[_vm._v(\"Type\")]),_c('div',{staticClass:\"fht-cell\"})]),_c('th',{attrs:{\"tabindex\":\"0\",\"data-field\":\"price\"}},[_c('div',{staticClass:\"th-inner both\"},[_vm._v(\"Location\")]),_c('div',{staticClass:\"fht-cell\"})]),_c('th',{attrs:{\"tabindex\":\"0\",\"data-field\":\"price\"}},[_c('div',{staticClass:\"th-inner both\"},[_vm._v(\"Progress\")]),_c('div',{staticClass:\"fht-cell\"})])])])}]\n\nexport { render, staticRenderFns }","// Get all the entries (files or sub-directories) in a directory\n// by calling readEntries until it returns empty array\nasync function readAllDirectoryEntries(directoryReader) {\n  let entries = [];\n  let readEntries = await readEntriesPromise(directoryReader);\n  while (readEntries.length > 0) {\n    entries.push(...readEntries);\n    readEntries = await readEntriesPromise(directoryReader);\n  }\n  return entries;\n}\n\n// Wrap readEntries in a promise to make v-else-if=\"'file' in node.data\" working with readEntries easier\n// readEntries will return only some of the entries in a directory\n// e.g. Chrome returns at most 100 entries at a time\n\n/* eslint-disable no-console */\nasync function readEntriesPromise(directoryReader) {\n  try {\n    return await new Promise((resolve, reject) => {\n      directoryReader.readEntries(resolve, reject);\n    });\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction dtransfers(dataTransfer) {\n  if (window === this) {\n    return new dtransfers(dataTransfer);\n  }\n  this.dataTransfer = dataTransfer;\n  return this;\n}\n\ndtransfers.prototype = {\n  // Drop handler function to get all files\n  getAllFileEntries: async function() {\n    let fileEntries = [];\n    // Use BFS to traverse entire directory/file structure\n    let queue = [];\n    // Unfortunately dataTransferItemList is not iterable i.e. no forEach\n    for (let i = 0; i < this.dataTransfer.items.length; i++) {\n      queue.push(this.dataTransfer.items[i].webkitGetAsEntry());\n    }\n    while (queue.length > 0) {\n      let entry = queue.shift();\n      if (entry.isFile) {\n        fileEntries.push(entry);\n      } else if (entry.isDirectory) {\n        queue.push(...await readAllDirectoryEntries(entry.createReader()));\n      }\n    }\n    return fileEntries;\n  }\n\n}\n\nexport { dtransfers as default };\n","function flatten(arr) {\n  return [].concat(...arr)\n}\n\nfunction Treehelp(node) {\n  var about = {\n     Version: 0.1,\n     Author: \"Greg Jansen\",\n     Created: \"Fall 2020\",\n     Updated: \"Fall 2020\"\n  };\n  if (window === this) {\n    return new Treehelp(node);\n  }\n  if(node) {\n    this.node = node;\n    return this;\n  } else {\n    return about;\n  }\n}\n\n/* eslint-disable no-console */\nTreehelp.prototype = {\n  depthFirstChildren: function() {\n    return flatten(\n      this.node.children.map( x => x.children.length > 0 ? [x].concat(new Treehelp(x).depthFirstChildren()) : x)\n    )\n  },\n  makePath: function(base) {\n    if(this.node.id == 'root') {  // get base node\n      if(base) {\n        return base;\n      } else {\n        return '/';\n      }\n    }\n    var segments = [];\n    for(var n = this.node; n != null; n = n.parent) {\n      segments.push(n.data.text);\n    }\n    let result = segments.reverse().join('/');\n    if(base) result = base + result;\n    if(this.node.isBatch) { result += \"/\"; }\n    return result.replace(' ', '_');\n  },\n  findVue: function(path) {\n    //console.log('finding: '+path+'in...');\n    //console.log(this.node);\n    var chain = path.split('/');\n    if(path.endsWith('/')) chain.pop();\n    //chain.shift();\n    var currentNode = this.node;\n    for (var j = 0; j < chain.length; j++) {\n      let nextnode = null;\n      for(var i = 0; i < currentNode.$children.length; i++) {\n        let n = currentNode.$children[i];\n        //console.log(n.node.data);\n        if(n.node.data.text == chain[j]) {\n          nextnode = n;\n          break;\n        }\n      }\n      if(nextnode == null) {\n        console.log(\"not found: \"+chain[j]+\"\\nunder: \"+currentNode.text);\n        return null;\n      } else {\n        currentNode = nextnode;\n      }\n    }\n    //console.log(\"found: \"+currentNode.node.data.text);\n    return currentNode;\n  }\n};\n\nexport { Treehelp as default };\n","function Filenames(filename) {\n  var about = {\n     Version: 0.1,\n     Author: \"Greg Jansen\",\n     Created: \"Fall 2020\",\n     Updated: \"Fall 2020\"\n  };\n  if (window === this) {\n    return new Filenames(filename);\n  }\n  // NABWH_001_SG1_S19_B01_F01_D01_P008.tif\n  this.resource_names = /^(?<archives>[^_]*)_(?<collection>_[^_]*)(?<subgroup>_.*)\\..*/g\n  this.sources = /\\.tif$/g\n  this.md5_sheet = /_MD5\\.xlsx$/g\n  this.dc_sheet = /inventory.xlsx$/g\n  if(filename) {\n    this.filename = filename;\n    this.parts = this.filename.match(this.resource_names);\n    return this;\n  } else {\n    return about;\n  }\n}\n\n/* eslint-disable no-console */\nFilenames.prototype = {\n  getDescriptionPaths: function() {\n    let idx = new String(this.filename).lastIndexOf('.'); // can be -1 if not found\n    if(idx < 0) {\n      idx = this.filename.length;\n    }\n    let basename = this.filename.slice(0, idx);\n    let parts = basename.split('_');\n    if(parts.length < 5) { return []; }\n    parts[0] = parts[0]+'_'+parts[1]; // WONT FIX smush archive and collection together\n    parts.splice(1, 1);\n    parts[3] = 'BX00'+parts[3].slice(1,3);  // B01 segment to BX0001 form\n    parts[4] = 'FL00'+parts[4].slice(1,3);  // F01 segment to FL0001 form\n    return parts.map((val, idx) => {\n      return '/'+parts.slice(0, idx+1).join('/');\n    }).reverse();\n  },\n  getItemPath: function() {\n    let idx = new String(this.filename).lastIndexOf('.'); // can be -1 if not found\n    if(idx < 0) {\n      idx = this.filename.length;\n    }\n    let basename = this.filename.slice(0, idx);\n    let parts = basename.split('_');\n    if(parts.length < 5) { return []; } // invalid\n    parts[0] = parts[0]+'_'+parts[1]; // WONT FIX smush archive and collection together\n    parts.splice(1, 1);\n    parts[3] = 'BX00'+parts[3].slice(1,3);  // B01 segment to BX0001 form\n    parts[4] = 'FL00'+parts[4].slice(1,3);  // F01 segment to FL0001 form\n    return parts.join('/');\n  },\n  isSource: function() {\n    return this.sources.test(this.filename);\n  },\n  isMD5Sheet: function() {\n    return this.md5_sheet.test(this.filename);\n  },\n  isDCSheet: function() {\n    return this.dc_sheet.test(this.filename);\n  }\n};\n\nexport { Filenames as default };\n","/* eslint-disable no-console */\nimport XLSX from 'xlsx';\nimport filenames from './filenames';\n\nfunction Sheet(fsfileentry) {\n  var about = {\n     Version: 0.1,\n     Author: \"Greg Jansen\",\n     Created: \"Fall 2020\",\n     Updated: \"Fall 2020\"\n  };\n  if (window === this) {\n    return new Sheet(fsfileentry);\n  }\n  // NABWH_001_SG1_S19_B01_F01_D01_P008.tif\n  this.workbook = undefined;\n  if(fsfileentry) {\n    this.fsfileentry = fsfileentry;\n    return this;\n  } else {\n    return about;\n  }\n}\n\nfunction readFile(entry, successCallback, errorCallback) {\n  entry.file(function(f) {\n    //console.log('file function called');\n    var reader = new FileReader();\n    reader.onload = function(e) {\n      //console.log('reader function');\n      var data = new Uint8Array(e.target.result);\n      successCallback(XLSX.read(data, {type: 'array'}));\n    };\n    reader.onerror = function() {\n      errorCallback(reader.error);\n    }\n    reader.readAsArrayBuffer(f);\n  }, errorCallback);\n}\n\n// function extractLines(start, end, text) {\n//   let result = [];\n//   text.split('\\n').forEach( (line, idx) => {\n//     if(start <= idx && idx <= end) {\n//       result.push(line);\n//     }\n//   });\n//   console.log(result.length);\n//   return result.join('\\n');\n// }\n\n/* eslint-disable no-console */\nSheet.prototype = {\n  getTextPreview: function() {\n    var worksheet = this.workbook.Sheets[this.workbook.SheetNames[0]];\n    return XLSX.utils.sheet_to_txt(worksheet).split('\\n').slice(0, 6).join('\\n');\n  },\n  loadWorkbook: function() {\n    readFile(this.fsfileentry,\n      wb => { this.workbook = wb; },\n      function(e) {\n        console.log(e);\n      }\n    );\n  },\n  harvestDC: function(descriptions_base) {\n    let result = `@prefix  dce:   <http://purl.org/dc/elements/1.1/>.\n@prefix  xsd:   <http://www.w3.org/2001/XMLSchema#>.\n\n`;\n    var worksheet = this.workbook.Sheets[this.workbook.SheetNames[0]];\n    const json = XLSX.utils.sheet_to_json(worksheet);\n    const lookup = {};\n    Object.entries(json[0]).forEach(([key, value]) => {\n      if(value.toLowerCase() in dc_mapping) {\n        lookup[key] = value.toLowerCase();\n      }\n    });\n    json.slice(1).forEach((item) => {\n      let dc_record = {};\n      Object.entries(item).forEach(([key, value]) => {\n        if(new String(value).trim().length < 1) {\n          // skip blank values in spreadsheet\n        } else if (key in lookup) {\n          if(lookup[key] != 'date') {\n            dc_record[lookup[key]] = '\"'+value.replace(/\"/g,'\\\\\"')+'\"';\n          } else {\n            dc_record[lookup[key]] = '\"'+value+'\"^^xsd:date';\n          }\n        }\n      });\n      let path = new filenames(dc_record['identifier']).getItemPath().slice(1,-1);\n      //console.log(path);\n      result += `<${descriptions_base}${path}> `\n      Object.entries(dc_record).forEach(([prop, value]) => {\n        result += `dce:${prop} ${value};\\n`;\n      });\n      result += \".\\n\";\n    });\n    //console.log(extractLines(240, 242, result));\n    return result;\n  }\n}\n\nconst dc_mapping = {\n  identifier: {},\n  title: {},\n  creator: {},\n  subject: {},\n  description: {},\n  date: {},\n  rights: {}\n};\n\n/* eslint-disable no-unused-vars */\nconst example_json = [\n  {\n    \"__EMPTY\": \"Collection\",\n    \"__EMPTY_1\": \"SubGroup\",\n    \"__EMPTY_2\": \"Series\",\n    \"__EMPTY_3\": \"Sub Series\",\n    \"__EMPTY_4\": \"Box\",\n    \"__EMPTY_5\": \"Folder\",\n    \"__EMPTY_6\": \"Document\",\n    \"Dublin Core Metadata\": \"Identifier\",\n    \"__EMPTY_7\": \"Title\",\n    \"__EMPTY_8\": \"Creator\",\n    \"__EMPTY_9\": \"Subject\",\n    \"__EMPTY_10\": \"Description\",\n    \"__EMPTY_11\": \"Date\",\n    \"__EMPTY_12\": \"Rights\"\n  },\n  {\n    \"__EMPTY\": \"NABWH_001\",\n    \"__EMPTY_1\": 1,\n    \"__EMPTY_2\": 19,\n    \"__EMPTY_4\": 1,\n    \"__EMPTY_5\": 1,\n    \"__EMPTY_6\": 1,\n    \"Dublin Core Metadata\": \"NABWH_001_SG1_S19_B01_F01_D01\",\n    \"__EMPTY_7\": \"Newsletter, New Careers\",\n    \"__EMPTY_8\": \"New Careers\",\n    \"__EMPTY_9\": \"New Careers\",\n    \"__EMPTY_10\": \"Vol. 1, No. 3 of newsletter New Careers\",\n    \"__EMPTY_11\": \"1967\",\n    \"__EMPTY_12\": \"Fair Use Only. The subject of this image is part of the National Archives for Black Women's History, which has been under the management and care of the National Park Service since 1994. The Mary McLeod Bethune Council House National Historic Site, National Archives for Black Women's History does not hold the intellectual property rights to all materials within its collections. Use of this image and the subject document is restricted to fair use only. Contact the repository for updated information about more extensive use.  [2017-08-04].\"\n  }\n];\n\n\nexport { Sheet as default };\n","<template>\n  <div class=\"container-fluid d-flex flex-column h-100\">\n    <div class=\"row\">\n      <h2>Submissions</h2>\n      <div style=\"padding-left: 5em\">&nbsp;&nbsp;&nbsp;&nbsp;<CreateSubmission /></div>\n    </div>\n    <div class=\"row h-70\">\n      <div class=\"col-md-6 overflow-auto\" style=\"overflow-y: scroll; height: 700px\">\n        <tree df:data=\"fetchData\" dafdv-slot:default=\"slotProps\" :options=\"treeOptions\" df:filter=\"filter\" ref=\"tree\">\n          <span class=\"tree-text\" slot-scope=\"{ node }\" >\n            <div id=\"file-drag-drop\" style='display: inline'>\n              <form\n                @drag.stop.prevent\n                @dragstart.stop.prevent\n                @dragend.stop.prevent\n                @dragover.stop.prevent\n                @dragenter.stop.prevent\n                @dragleave.stop.prevent\n                @drop.stop.prevent=\"drop($event, node)\">\n                <template>\n                  <feather :type=\"icon(node.data.rdf)\" />\n                  &nbsp;&nbsp; {{ node.data.text }} &nbsp;&nbsp;\n                  <template v-if=\"is(node.data.rdf, NRS) && node.data.rdf.value.endsWith('.tif')\">\n                    <span style=\"font-family: 'Courier New', monospace;\">\n                      <span style=\"color: red\" v-if=\"node.data.md5Manifest == null\">[</span>\n                      <span v-else>[</span>\n                      <span style=\"color: red\" v-if=\"node.data.md5Manifest == null || node.data.md5System == null || node.data.md5System != node.data.md5Manifest\"></span>\n                      <span v-else>=</span>\n                      <span style=\"color: red\" v-if=\"node.data.md5System == null\">]</span>\n                      <span v-else>]</span>\n                    </span>\n                  </template>\n                </template>\n              </form>\n            </div>\n          </span>\n        </tree>\n      </div>\n      <div class=\"col-md-6\" v-if=\"currentNode\">\n        <div class=\"container\">\n           <span v-for=\"(c, index) in crumbs\" :key=\"crumbs.slice(0,index).join('/')\" class=\"crumb\">\n             {{ c }} <feather type=\"chevrons-right\" />\n           </span>\n        </div>\n\n        <div class=\"container\">\n          <h2><template v-if=\"is(currentNode.data.rdf, SUBMISSION)\">Submission: </template>{{ currentNode['text'] }}</h2>\n        </div>\n\n        <div class=\"tabs\">\n          <a v-on:click=\"activetab=1\" v-bind:class=\"[ activetab === 1 ? 'active' : '' ]\">View</a>\n          <a v-on:click=\"activetab=2\" v-bind:class=\"[ activetab === 2 ? 'active' : '' ]\">Description</a>\n          <a v-on:click=\"activetab=3\" v-bind:class=\"[ activetab === 3 ? 'active' : '' ]\">Provenance</a>\n          <a v-on:click=\"activetab=4\" v-bind:class=\"[ activetab === 4 ? 'active' : '' ]\">Technical Data</a>\n        </div>\n\n        <div class=\"content\">\n          <div v-if=\"activetab === 1\" class=\"tabcontent\">\n              <img v-if=\"isimage\" :src=\"nodeurl\" :key=\"getPath(currentNode)\" class=\"img-fluid\" style=\"padding-top: 5px; max-height: 500px\">\n              <template v-if=\"is(currentNode.data.rdf, SUBMISSION)\">\n                <p>Submission Package Status: <span style=\"color: green\">Preparing</span></p>\n                <ol>\n                  <li>Drag and drop scanned page files onto the submission package icon or below<br />\n\n                    <div @drag.stop.prevent\n                    @dragstart.stop.prevent\n                    @dragend.stop.prevent\n                    @dragover.stop.prevent\n                    @dragenter.stop.prevent\n                    @dragleave.stop.prevent\n                    @drop.stop.prevent=\"drop($event, currentNode)\" id=\"dropPad\">\n                      <input type=\"file\" name=\"files[]\" id=\"file\" class=\"box__file\" data-multiple-caption=\"{count} files selected\" multiple />\n                      <label for=\"file\"><strong>Choose files</strong><span class=\"box__dragndrop\"> or drag them here</span>.</label>\n                    </div>\n                  </li>\n                  <li>Upload an MD5 manifest (Excel file: ???_MD5.xslx).</li>\n                  <li>Wait for fixity calculations to complete..</li>\n                  <li>Review fixity status of uploaded files. (Red indicates an issue.)</li>\n                  <li>Upload a Dublin Core metadata (Excel file: ???_inventory.xslx).</li>\n                  <li>Do you expect to create <span style=\"color: green\">{{ currentNode.data.docsExpected }}</span> documents with <span style=\"color: green\">{{ currentNode.data.pages }}</span> pages in total?</li>\n                  <li>If so, click on <button @click=\"makePagedDocuments(currentNode.data.rdf.uri)\">Make Documents</button> to create document structures.</li>\n                  <li>Review document structures</li>\n                  <li>All documents should be linked to a folder in the archival description.</li>\n                  <li>If this submission package is complete, click on <button @click=\"ingest()\">Ingest</button> to make it official.</li>\n                </ol>\n              </template>\n              <template v-else-if=\"is(currentNode.data.rdf, PCDM_OBJECT)\">\n                <div>\n                <template v-for=\"(s, idx) in pcdmPageImages\">\n                  <img height=\"50\" :src=\"s\" v-bind:key=\"idx\" />\n                </template>\n                </div>\n                <p><strong><a v-bind:href=\"this.currentNode.data.rdf.uri\">Raw content link (text/turtle)</a></strong></p>\n              </template>\n              <template v-else-if=\"is(currentNode.data.rdf, NRS)\">\n                <p><strong><a target=\"_blank\" v-bind:href=\"this.currentNode.data.rdf.uri\">Raw file link</a></strong></p>\n              </template>\n              <template v-else-if=\"is(currentNode.data.rdf, RS)\">\n                <p><strong><a v-bind:href=\"this.currentNode.data.rdf.uri\">Raw content link (text/turtle)</a></strong></p>\n              </template>\n          </div>\n          <div v-if=\"activetab === 2\" class=\"tabcontent\">\n            <a v-if=\"hasRelatedObjectOf\" v-bind:href=\"relatedObjectOf\">Finding aid location: {{ relatedObjectOf }}</a>\n            <template v-for=\"s in rdfProps\">\n            <div :key=\"s[0]+s[1]\" v-if=\"s[0].startsWith('<http://purl.org/dc/elements/1.1/')\" class=\"row\">\n              <div class=\"col-md-3\">{{ s[0] }}</div>\n              <div class=\"col-md-9\">{{ s[1] }}</div>\n            </div>\n            </template>\n              <p>TODO render item level Dublin Core (to be extracted from manifest)</p>\n          </div>\n          <div v-if=\"activetab === 3\" class=\"tabcontent\">\n              List of PREMIS events.\n          </div>\n          <div v-if=\"activetab === 4\" class=\"tabcontent\">\n            <div class=\"container\">\n              <p>TODO: use prefixes w/hover showing expanded URIs.</p>\n              <div v-for=\"(s, index) in rdfProps\" v-bind:key=\"index\" dfkey=\"s[0]+s[1]\" class=\"row\">\n                <div class=\"col-md-3\">{{ s[0] }}</div>\n                <div class=\"col-md-9\">{{ s[1] }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <hr />\n    <div class=\"row mt-auto h-100 col-md-12 mb-3\">\n      <div class=\"scroll col-md-12\">\n        <h4>Actions</h4>\n        <table class=\"table table-hover\">\n          <thead>\n            <tr>\n        <th tabindex=\"0\" style=\"\" data-field=\"id\">\n          <div class=\"th-inner both\">#</div>\n          <div class=\"fht-cell\"></div>\n        </th>\n        <th tabindex=\"0\" style=\"\" data-field=\"name\">\n          <div class=\"th-inner both\">Type</div>\n          <div class=\"fht-cell\"></div>\n        </th>\n        <th tabindex=\"0\" style=\"\" data-field=\"price\">\n          <div class=\"th-inner both\">Location</div>\n          <div class=\"fht-cell\"></div>\n        </th>\n        <th tabindex=\"0\" style=\"\" data-field=\"price\">\n          <div class=\"th-inner both\">Progress</div>\n          <div class=\"fht-cell\"></div>\n        </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(action, index) in ldpActions\" v-bind:key=\"index\">\n               <td>{{ index }}</td><td>{{ action.type }}</td><td>{{ action.uri }}</td><td><progress max=\"100\" :value.prop=\"action.progress\">{{ action.progress }}</progress></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable no-console */\n/* eslint-disable no-alert */\n/* eslint-disable no-unused-vars */\nimport LiquorTree from 'liquor-tree'\nimport dtransfers from '../assets/js/dtransfers.js'\nimport Treehelp from '../assets/js/treehelp.js'\nimport filenames from '../assets/js/filenames'\nimport sheet from '../assets/js/nps-sheets'\n\nconst $rdf = require('rdflib');\nconst posix = require('path-posix')\nconst path = require('path');\n\nfunction alphaSort(a, b) {\n  var x = a.text.toLowerCase();\n  var y = b.text.toLowerCase();\n  if (x < y) {return -1;}\n  if (x > y) {return 1;}\n  return 0;\n}\n\nfunction determineDragAndDropCapable() {\n var div = document.createElement('div');\n return ( ( 'draggable' in div )\n         || ( 'ondragstart' in div && 'ondrop' in div ) )\n         && 'FormData' in window\n         && 'FileReader' in window;\n}\n\n// Find keys in o1 that are missing in o2\nfunction differenceKeyset(o1, o2)\n{\n    var differenceSet = new Set();\n    Object.keys(o1).forEach( (key) => {\n        if(!(key in o2)) {\n          differenceSet.add(key);\n        }\n    });\n    return differenceSet;\n}\n\nfunction Queue() {\n    this.elements = [];\n}\nQueue.prototype.enqueue = function (e) {\n    if(this.isEmpty()) {\n        this.elements.push(e);\n    } else if(this.elements[this.elements.length -1] != e) {\n        this.elements.push(e);\n    }\n};\nQueue.prototype.dequeue = function () {\n    return this.elements.shift();\n};\nQueue.prototype.isEmpty = function () {\n    return this.elements.length == 0;\n};\nQueue.prototype.peek = function () {\n    return !this.isEmpty() ? this.elements[0] : undefined;\n};\nQueue.prototype.length = function() {\n    return this.elements.length;\n}\n\nexport default {\n  name: 'Submissions',\n  props: {\n    asWebSocketURL: {  // like 'ws://localhost:9090/notifier'\n      required: true,\n      type: String,\n    },\n    ldpURL: {  // like 'http://localhost:9090';\n      required: true,\n      type: String\n    },\n    submissionsPath: {\n      type: String,\n      default:  '/submissions/'\n    }\n  },\n  components: {\n    'tree': LiquorTree\n  },\n  created() {\n    this.LDP = $rdf.Namespace('http://www.w3.org/ns/ldp#');\n    this.R = this.LDP('Resource');\n    this.RS = this.LDP('RDFSource');\n    this.NRS = this.LDP('NonRDFSource');\n    this.BC = this.LDP('BasicContainer');\n    this.PCDM = $rdf.Namespace('http://pcdm.org/models#');\n    this.PCDM_OBJECT = this.PCDM('Object');\n    this.IANA = $rdf.Namespace('http://www.iana.org/assignments/relation/');\n    this.ORE = $rdf.Namespace('http://www.openarchives.org/ore/terms/');\n    this.DCE = $rdf.Namespace('http://purl.org/dc/elements/1.1/');\n    this.RDF = $rdf.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#');\n    this.NPS = $rdf.Namespace('https://example.nps.gov/2021/nps-workflow#');\n    this.SUBMISSION = this.NPS('submission');\n    this.PREMIS = $rdf.Namespace('http://www.loc.gov/standards/premis/rdf/v3/');\n    this.MD5 = $rdf.sym('http://id.loc.gov/vocabulary/cryptographicHashFunctions/md5');\n    this.rdfStore = $rdf.graph();\n    this.rdfFetcher = new $rdf.Fetcher(this.rdfStore);\n    this.baseContainer = this.rdfStore.sym(this.ldpURL + this.submissionsPath);\n    this.updateTimer = null;\n    this.updateQueue = new Queue();\n    this.activityStreamWebSocket = new WebSocket(this.asWebSocketURL);\n    this.activityStreamWebSocket.onmessage = ({ data }) => {\n      const activityMessage = JSON.parse(data);\n      // make update async and consolidate events\n      if(activityMessage.type[1] == \"Update\") {\n        var urlstr = activityMessage.object.id;\n        if(urlstr.indexOf('?') >= 0) {\n          urlstr = urlstr.substring(0, urlstr.indexOf('?'));\n        }\n        this.updateQueue.enqueue(urlstr);\n      }\n    };\n    this.activityStreamWebSocket.onopen = function(event) {\n      //console.log(\"Successfully connected to the activity stream websocket.\")\n    };\n    this.activityStreamWebSocket.onerror = function(event) {\n      console.log(event)\n      console.log(\"Error with websocket...\")\n    };\n  },\n  mounted() {\n    this.dragAndDropCapable = determineDragAndDropCapable();\n    this.$refs.tree.$on(\"node:selected\", this.focus);\n    let me = this;\n    this.$refs.tree.$on(\"tree:mounted\", function(treecomponent) {\n      me.$refs.tree.model.forEach((c) => { me.calculateNodeData(c); });\n    });\n    this.$refs.tree.$on(\"tree:data:received\", function(parentNode) {\n      me.calculateNodeData(parentNode);\n      parentNode.children.forEach((c) => { me.calculateNodeData(c); });\n    });\n    this.$refs.tree.$on(\"node:added\", function(oldNode, newNode) {\n      let node = newNode && newNode.data.text ? newNode : oldNode;\n      me.calculateNodeData(node);\n    });\n    this.timer = setTimeout(this.processQueue, 5000);\n  },\n  computed: {\n    crumbs: function() {\n      let segs = new Treehelp(this.currentNode).makePath().split('/');\n      segs.pop();\n      return segs;\n    },\n    isimage: function() {\n      let re_img = /.*\\.(jpg|JPG|jpeg|JPEG|png|PNG|gif|GIF|svg|SVG)/\n      return re_img.test(this.currentNode.text);\n    },\n    hasRelatedObjectOf: function() {\n      let d = this.rdfStore.statementsMatching(this.currentNode.data.rdf, this.PCDM('relatedObjectOf'), undefined);\n      return d.length > 0;\n    },\n    nodeurl: function() {\n      return this.ldpURL + new Treehelp(this.currentNode).makePath(this.submissionsPath);\n    },\n    rdfProps: function () {\n      let rdfdetails = this.rdfStore.statementsMatching(this.currentNode.data.rdf, undefined, undefined);\n      return rdfdetails.map(\n        v => {\n          let result = [];\n          result[0] = String(v.predicate);\n          result[1] = v.object;\n          return result;\n        }\n      );\n    },\n    pcdmPageImages: function() {\n      console.log('called');\n      let result = [];\n      let g = this.currentNode.data.rdf;\n      let first = this.rdfStore.any(this.currentNode.data.rdf, this.IANA('first'));\n      console.log('first '+ first);\n      for(let p = first; p != null; p = this.rdfStore.any(p, this.IANA('next'))) {\n        let page = this.rdfStore.any(p, this.ORE('proxyFor'));\n        let images = this.rdfStore.each(page, this.PCDM('hasFile'));\n        for(let i in images) {\n          console.log(images[i]);\n          if(images[i].value.endsWith('_ACCESS.png')) {\n            result.push(images[i].value);\n          }\n        }\n        if(images.length == 0) {\n          result.push(\"/missingimage.png\")\n        }\n      }\n      return result;\n    },\n    relatedObjectOf: function() {\n      return this.rdfStore.each(this.currentNode.data.rdf, this.PCDM('relatedObjectOf'))[0];\n    }\n  },\n  methods: {\n    is: function(rdfnode, type) {\n      let matches = this.rdfStore.statementsMatching(rdfnode, this.RDF('type'), type);\n      return matches.length > 0;\n    },\n    icon: function(rdfnode) {\n      if(this.is(rdfnode, this.SUBMISSION)) {\n        return 'archive';\n      } else if (this.is(rdfnode, this.BC)) {\n        return 'folder';\n      } else if (this.is(rdfnode, this.RS)) {\n        return 'layers';\n      } else {\n        return 'file';\n      }\n    },\n    fixitySeverity: function(rdfnode) {\n      if(this.fixityExists(rdfnode)) {\n        if(this.manifestFixityExists(rdfnode)) {\n          if(this.fixityValid(rdfnode)) {\n            return \"info\"\n          }\n        }\n        return \"warn\";\n      } else {\n        return \"error\";\n      }\n    },\n    fixityExists: function(rdfnode) {\n      let matches = this.rdfStore.statementsMatching(rdfnode, this.PREMIS('fixity'), undefined);\n      return matches.length > 0;\n    },\n    manifestFixityExists: function(rdfnode) {\n      this.rdfStore.each(rdfnode, this.PREMIS('fixity'), undefined)\n      .forEach(fixity => {\n        if(this.rdfStore.statementsMatching(fixity, this.DCE('source'), undefined) > 0) {\n          return true;\n        }\n      })\n      return false;\n    },\n    getManifestMD5: function(rdfnode) {\n      var result = null;\n      let fs = this.rdfStore.each(rdfnode, this.PREMIS('fixity'), undefined);\n      let graph = $rdf.sym(rdfnode.value+'?ext=description');\n      for(let f in fs) {\n        if(this.rdfStore.statementsMatching(fs[f], this.DCE('source'), undefined, graph).length == 0) {\n          continue;\n        }\n        if(this.rdfStore.statementsMatching(fs[f], this.RDF('type'), this.MD5, graph).length == 0) {\n          continue;\n        }\n        result = this.rdfStore.any(fs[f], this.RDF('value'), undefined, graph).value;\n        break;\n      }\n      return result;\n    },\n    getSystemMD5: function(rdfnode) {\n      var result = null;\n      let fs = this.rdfStore.each(rdfnode, this.PREMIS('fixity'), undefined);\n      let graph = $rdf.sym(rdfnode.value+'?ext=description');\n      for(let f in fs) {\n        let creator = this.rdfStore.any(fs[f], this.DCE('creator'), undefined, graph);\n        if(this.rdfStore.any(fs[f], this.DCE('creator'), undefined, graph).value != 'java.security.MessageDigest') {\n          continue;\n        }\n        if(this.rdfStore.statementsMatching(fs[f], this.RDF('type'), $rdf.sym('http://id.loc.gov/vocabulary/cryptographicHashFunctions/md5'), graph).length == 0) {\n          continue;\n        }\n        result = this.rdfStore.any(fs[f], this.RDF('value'), undefined, graph).toString();\n        break;\n      }\n      return result;\n    },\n    fetchData: function(node) {\n      let me = this;\n      return new Promise(function (resolve) {\n        var container = null;\n        if(node.id == 'root') {  // get base node\n          container = me.baseContainer;\n        } else if('rdf' in node.data) {\n          container = node.data.rdf;\n        }\n        me.rdfFetcher.unload(container);\n        me.rdfFetcher.load(container, {'force': true}).then(() => {\n          let contents = me.rdfStore.each(container, me.LDP('contains'));\n          let loadList = [];\n          for (var i=0; i<contents.length; i++) {\n            let loadLoc = contents[i].uri;\n            if(!loadLoc.endsWith('/')) {\n              loadList.push(loadLoc + \"?ext=description\");\n            } else {\n              loadList.push(loadLoc);\n            }\n          }\n          // TODO Some of these are files.. and need ?ext=description\n          me.rdfFetcher.load(loadList, {'force': true}).then(() => {\n            let result = [];\n            for (var i=0; i<contents.length; i++) {\n              let n = {id:null, data: { rdf: contents[i] } };\n              if(contents[i].uri.endsWith(\"/\")) {\n                //n.data['types'] = [this.BC.value];\n                n['text'] = contents[i].uri.split('/').reverse()[1];\n                n['isBatch'] = true;\n              } else {\n                //n.data['types'] = [];\n                n['text'] = contents[i].uri.split('/').reverse()[0];\n                n['isBatch'] = true;\n              }\n              result.push(n);\n              me.subscribe(contents[i].uri);\n            }\n            result.sort(alphaSort);\n            me.subscribe(container.uri);\n            resolve(result);\n          });\n        }).catch(e => console.log(e));\n      });\n    },\n    calculateNodeData: function(node) {\n      if(node.id == 'root') return;\n      if(this.is(node.data.rdf, this.NRS)) {\n        console.log('updating '+node.data.text);\n        node.data['md5Manifest'] = this.getManifestMD5(node.data.rdf);\n        node.data['md5System'] = this.getSystemMD5(node.data.rdf);\n      }\n      if(this.is(node.data.rdf, this.SUBMISSION)) {\n        let data = this.submissionContent(node.data.rdf);\n        node.data['docsExpected'] = data[0];\n        node.data['docsActual'] = data[1];\n        node.data['pages'] = data[2];\n      }\n      let data = node.data;\n      node.data = data;\n    },\n    submissionContent: function(submission) {\n      let contents = this.rdfStore.each(submission, this.LDP('contains'));\n      var docsExpected = new Set();\n      var docsActual = 0;\n      var pages = 0;\n      for (var i=0; i<contents.length; i++) {\n        let c = contents[i];\n        if(this.is(c, this.NRS)) {\n          var name = c.uri.slice(c.uri.lastIndexOf('/')+1);\n          var fn = new filenames(name);\n          if(!fn.isSource()) continue;\n          var paths = fn.getDescriptionPaths();\n          if(paths.length == 0) continue;\n          let docPath = paths[1];\n          console.log('docpath: '+ docPath);\n          docsExpected.add(docPath);\n          pages += 1;\n        } else if (this.is(c, this.DOCUMENT)) {\n          docsActual += 1;\n        }\n      }\n      return [docsExpected.size, docsActual, pages];\n    },\n    processQueue: function() {\n      while(!this.updateQueue.isEmpty()) {\n        var next = this.updateQueue.dequeue();\n        this.updateNode(next);\n      }\n      this.timer = setTimeout(this.processQueue, 5000);\n    },\n    updateNode: function(urlstr) {\n      console.log('updateNode '+urlstr)\n      const url = new URL(urlstr);\n      let relPath = url.pathname.substring(this.submissionsPath.length);\n      let segments = relPath.split('/');\n      if(relPath.endsWith('/')) {\n        segments.pop();\n      }\n      let slug = segments.pop();\n      let parentPath = segments.join('/');\n      let rdfnode = null;\n      let ltnode = null;\n      let oldChildMap = {};\n      if(relPath == \"\") { // tree root is special case\n        ltnode = this.$refs.tree;\n        rdfnode = this.baseContainer;\n        this.$refs.tree.tree.model.forEach((c) => { oldChildMap[c.data.text] = c });\n      } else {\n        console.log(\"relpath \"+relPath)\n        console.log(\"vuenode\");\n        console.log(new Treehelp(this.$refs.tree).findVue(relPath));\n        ltnode = new Treehelp(this.$refs.tree).findVue(relPath).node;\n        rdfnode = ltnode.data.rdf;\n        ltnode.children.forEach((c) => { oldChildMap[c.data.text] = c });\n      }\n      let loadList = [];\n      if(!rdfnode.uri.endsWith('/')) {\n        loadList.push(rdfnode.uri + \"?ext=description\");\n      } else {\n        loadList.push(rdfnode.uri);\n      }\n      for(let x in loadList) { this.rdfFetcher.unload($rdf.sym(loadList[x])); }\n      this.rdfFetcher.load(loadList, {'force': true}).then(() => {\n        if(relPath != \"\") {\n          this.calculateNodeData(ltnode);\n        }\n        let data = ltnode.data;\n        ltnode.data = data;\n        let contents = this.rdfStore.each(rdfnode, this.LDP('contains'));\n        var neuw = {};\n        for (var i=0; i<contents.length; i++) {\n          let c = {id:null, data: { rdf: contents[i] }};\n          if(contents[i].uri.endsWith(\"/\")) {\n            c['text'] = contents[i].uri.split('/').reverse()[1];\n            c['isBatch'] = true;\n          } else {\n            c['text'] = contents[i].uri.split('/').reverse()[0];\n            c['isBatch'] = true;\n          }\n          neuw[c.text] = c;\n        }\n        differenceKeyset(oldChildMap, neuw).forEach((name) => {\n          oldChildMap[name].remove();\n        });\n        differenceKeyset(neuw, oldChildMap).forEach((name) => {\n          let uri = neuw[name].data.rdf.uri;\n          this.subscribe(uri);\n          let loadChildList = [];\n          if(!uri.endsWith('/')) {\n            loadChildList.push(uri + \"?ext=description\");\n          } else {\n            loadChildList.push(uri);\n          }\n          this.rdfFetcher.load(loadChildList, {'force': true}).then(() => {\n            ltnode.addChild(neuw[name]);\n            this.$refs.tree.sortTree(alphaSort);\n          });\n        });\n      });\n    },\n    enqueueIngests: function(rawfiles, node) {\n      let ingests = [];\n      let folders = {};\n      let files = rawfiles.sort((a, b) => {\n        return a.fullPath.localeCompare(b.fullPath)\n      });\n      for (var i = 0; i < files.length; i++) {\n        var chain = files[i].fullPath.split(path.sep);  // TODO test Win32 paths\n        chain.shift();\n        var currentNode = node;\n        for (var j = 0; j < chain.length; j++) {\n            var slug = chain[j];\n            let ldpPath = new Treehelp(currentNode).makePath(this.submissionsPath).replace(/ /g,'_');\n            let ingestRelPath = chain.slice(0, j).join('/');\n            var parenturi = this.ldpURL + posix.join(ldpPath, ingestRelPath);\n            var newuri = this.ldpURL + posix.join(ldpPath, ingestRelPath, slug);\n            if(j == chain.length-1) { // last index is the file itself\n              this.uploadFile(parenturi, slug, files[i]);\n            } else {\n              // this is a container\n              if(folders[newuri]) {\n                continue;\n              } else {\n                folders[newuri] = true;\n                this.createFolder(parenturi, slug);\n              }\n            }\n        }\n      }\n    },\n    uploadFile: function(parenturi, slug, file) {\n      console.log(\"building ingest req for \"+slug+\" at \"+parenturi);\n      var action = {'type': 'Upload', 'uri': parenturi+'/'+slug, 'progress': 0, 'error': null};\n      this.ldpActions.push(action);\n      return new Promise((resolve) => {\n        file.file((file) => { resolve(file) });\n      }).then((file) => {\n        this.$http.post( parenturi, file,\n          { headers: {\n            'Link': `<${this.NRS.value}>; rel=\"type\"`,\n            'Slug': encodeURIComponent(file.name.replace(/\\|/g, '')).replace(/'/g, '%27'),\n            'Content-Type': 'application/octet-stream'},\n            onUploadProgress: function( progressEvent ) {\n              action.progress = parseInt( Math.round( ( progressEvent.loaded / progressEvent.total ) * 100 ));\n            }.bind(this)\n          }\n        );\n      }).catch( function(error) {\n        action.error = error;\n        console.log('FAILURE!!', error);\n      });\n    },\n    createFolder: function(parenturi, slug) {\n      var action = {'type': 'Create Folder', 'uri': parenturi+slug, 'progress': 0, 'error': null};\n      this.ldpActions.push(action);\n      let head = {\n         'Content-Type': 'application/ld+json',\n         'Link': `<${this.BC.value}>; rel=\"type\"`,\n         'Slug': slug\n       };\n       this.$http({\n           method: 'post',\n           url: parenturi,\n           headers: head\n       }).then(resolve => {\n         setTimeout(resolve, 200);\n         action.progress = 100;\n       }).catch( function(error) {\n         action.error = error;\n         console.log('FAILURE!!', error);\n       });\n    },\n    drop: async function(e, node) {\n      node.expand();\n      let files = await new dtransfers(e.dataTransfer).getAllFileEntries();\n      this.enqueueIngests(files, node);\n    },\n    focus: async function(oldNode, newNode) {\n      let node = newNode && newNode.data.text ? newNode : oldNode\n      this.currentNode = node;\n      for(let s = node; s != undefined; s = s.parent) {\n        if(s.data.isSubmission == true) {\n          this.currentSubmission = s;\n          break;\n        }\n      }\n    },\n    makePagedDocuments: function(uri) {\n      return new Promise(() => {\n        this.activityStreamWebSocket.send(JSON.stringify({makePagedDocuments: uri}));\n      });\n    },\n    subscribe: function(uri) {\n      return new Promise(() => {\n        this.activityStreamWebSocket.send(JSON.stringify({subscribe: uri}));\n        if(!uri.endsWith('/')) {\n          this.activityStreamWebSocket.send(JSON.stringify({subscribe: uri+'?ext=description'}));\n        }\n      });\n    },\n    uploadAdded: async function(parent, newnode) {\n      console.log(newnode)\n      console.log(this.NRS.value)\n      if(newnode.data.types.includes(this.NRS.value) && newnode.data.new) {\n        console.log(newnode);\n        let fn = new filenames(newnode.data.file.name);\n\n        if(fn.isDCSheet()) {\n          let data = newnode.data;\n          data['metadata'] = true;\n          data.sheet = new sheet(newnode.data.file);\n          newnode.data = data;\n          newnode.data.sheet.loadWorkbook();\n        }\n        // Locate nearest existing finding aid object and add a pcdm:relatedObjectOf link.\n        let paths = fn.getDescriptionPaths();\n        let result = null;\n        for( let i = 0; i < paths.length; i++) {\n          let base_container = this.rdfStore.sym(this.ldpURL);\n          let desc = this.rdfStore.sym(base_container.uri + '/description' + paths[i]);\n          await this.rdfFetcher.load(desc).then(() => {\n            result = desc;\n          }).catch(() => {\n            console.log(paths[i]+ ' not found');\n          });\n          if (result != null) {\n            break;\n          }\n        }\n        if(result != null) {\n          let data = newnode.data;\n          this.rdfStore.add(data.rdf, this.PCDM('relatedObjectOf'), result);\n          data['linked'] = true;\n          newnode.data = data;\n        }\n      }\n    },\n    getPath(node) {\n      return new Treehelp(node).makePath();\n    },\n    harvestDCSheet(node) {\n      let dcuri = this.ldpURL + '/submissions/' + this.getPath(node) + '/' + 'Extracted-Dublin-Core';\n      node.expand();\n      let turtle = node.data.sheet.harvestDC(this.ldpURL+'/description/');\n      let newNode = {id: null, data: {new: true, types: [this.RS.value], turtle: turtle }, text: \"Extracted-Dublin-Core\"};\n      node.append(newNode);\n    }\n  },\n  data: function() {\n    return {\n      dragAndDropCapable: false,\n      currentNode: undefined,\n      currentSubmission: undefined,\n      rdfdetails: undefined,\n      descdetails: undefined,\n      //ldp_baseurl: ldp_baseurl,\n      activetab: 1,\n      treeOptions: {\n        propertyNames: {\n          children: 'contents'\n        },\n        minFetchDelay: 1000,\n        fetchData: this.fetchData,\n        onFetchError(error) {\n          console.error(error)\n        }\n      },\n      ldpActions: [],\n      ldpActionFields: [ 'type', 'uri', 'progress' ]\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\n/* li {\n  display: inline-block;\n  margin: 0 10px;\n} */\na {\n  color: #42b983;\n}\na.btn-info {\n  color: #ffffff;\n}\ntable td, table th {\n  padding: 0px;\n}\n.feather {\n  width: 24px;\n  height: 24px;\n  margin-right: 10px;\n  vertical-align: text-bottom;\n}\nform {\n  display: block;\n  height: 100%;\n  width: 100%;\n  margin: 0px;\n  padding: 0px;\n  border: 0px;\n}\n\ndiv#dropPad\n{\n  font-size: 1.25rem; /* 20 */\n  background-color: #c8dadf;\n  position: relative;\n  padding: 100px 20px;\n}\ndiv#dropPad\n{\n  text-align: center;\n  outline: 2px dashed #92b0b3;\n  outline-offset: -10px;\n  -webkit-transition: outline-offset .15s ease-in-out, background-color .15s linear;\n  transition: outline-offset .15s ease-in-out, background-color .15s linear;\n}\n\nspan.new {\n  color: green;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./submissions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./submissions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./submissions.vue?vue&type=template&id=bbbb3a58&scoped=true&\"\nimport script from \"./submissions.vue?vue&type=script&lang=js&\"\nexport * from \"./submissions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./submissions.vue?vue&type=style&index=0&id=bbbb3a58&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bbbb3a58\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport 'bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport axios from 'axios'\nimport VueAxios from 'vue-axios'\nimport VueRouter from 'vue-router'\nimport VueFeather from 'vue-feather';\nimport Configuration from './ConfigProvider';\nimport CreateSubmission from './components/CreateSubmission.vue'\nimport App from './App.vue'\nimport Dashboard from './components/dashboard'\nimport Description from './components/description'\nimport Submissions from './components/submissions'\n\nrequire('dotenv').config()\nconst config = new Configuration(process.env);\n//const baseURL = config.value('baseURL');\nconst ldpURL = config.value('ldpURL');\nconst asWebSocketURL = config.value('asWebSocketURL');\n\nconst routes = [\n    {\n        path: '/dashboard',\n        name: 'Dashboard',\n        component: Dashboard\n    },\n    {\n        path: '/description',\n        name: 'Description',\n        component: Description\n    },\n    {\n        path: '/submissions',\n        name: 'Submissions',\n        component: Submissions,\n        props: {\n          asWebSocketURL: asWebSocketURL,\n          ldpURL: ldpURL,\n          submissionsPath: '/submissions/'\n        }\n    }\n]\n\nconst router = new VueRouter({\n  routes\n})\n\nVue.use(VueAxios, axios);\nVue.use(VueFeather);\nVue.use(VueRouter)\nVue.component(\"CreateSubmission\", CreateSubmission);\n\nnew Vue({\n  router,\n  render: h => h(App)\n}).$mount(\"#app\");\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateSubmission.vue?vue&type=style&index=0&id=60cc03a2&scoped=true&lang=css&\""],"sourceRoot":""}